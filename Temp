def move_block(pub_cmd, loop_rate, start_xw_yw_zw, target_xw_yw_zw, vel, accel):
    global digital_in_0
    
    error = 0
    
    # ========================= Student's code starts here =========================
    
    # Define safe height for moving (in meters)
    safe_height = 0.05
    
    print(f"Moving block from {start_xw_yw_zw} to {target_xw_yw_zw}")
    
    # Step 1: Move to home position first
    error = move_arm(pub_cmd, loop_rate, go_away, vel, accel)
    if error != 0:
        return error
    
    # Step 2: Move to safe height above start position
    start_above = [start_xw_yw_zw[0], start_xw_yw_zw[1], safe_height]
    start_above_angles = lab_invk(start_above[0], start_above[1], start_above[2], 0)
    if start_above_angles is None:
        rospy.logerr("No IK solution for start above position")
        return 1
    error = move_arm(pub_cmd, loop_rate, start_above_angles, vel, accel)
    if error != 0:
        return error
    
    # Step 3: Move down to pick up position
    start_pick_angles = lab_invk(start_xw_yw_zw[0], start_xw_yw_zw[1], start_xw_yw_zw[2], 0)
    if start_pick_angles is None:
        rospy.logerr("No IK solution for start pick position")
        return 1
    error = move_arm(pub_cmd, loop_rate, start_pick_angles, vel/2, accel/2)
    if error != 0:
        return error
    
    # Step 4: Activate suction
    gripper(pub_cmd, loop_rate, suction_on)
    time.sleep(1.0)
    
    # Check if block was picked up
    if digital_in_0 == 0:
        rospy.logerr("Block pickup failed - no suction detected")
        gripper(pub_cmd, loop_rate, suction_off)
        return 2
    
    # Step 5: Lift back to safe height
    error = move_arm(pub_cmd, loop_rate, start_above_angles, vel, accel)
    if error != 0:
        return error
    
    # Step 6: Move to home position
    error = move_arm(pub_cmd, loop_rate, go_away, vel, accel)
    if error != 0:
        return error
    
    # Step 7: Move to safe height above target position
    target_above = [target_xw_yw_zw[0], target_xw_yw_zw[1], safe_height]
    target_above_angles = lab_invk(target_above[0], target_above[1], target_above[2], 0)
    if target_above_angles is None:
        rospy.logerr("No IK solution for target above position")
        return 1
    error = move_arm(pub_cmd, loop_rate, target_above_angles, vel, accel)
    if error != 0:
        return error
    
    # Step 8: Move down to place position
    target_place_angles = lab_invk(target_xw_yw_zw[0], target_xw_yw_zw[1], target_xw_yw_zw[2], 0)
    if target_place_angles is None:
        rospy.logerr("No IK solution for target place position")
        return 1
    error = move_arm(pub_cmd, loop_rate, target_place_angles, vel/2, accel/2)
    if error != 0:
        return error
    
    # Step 9: Release suction
    gripper(pub_cmd, loop_rate, suction_off)
    time.sleep(1.0)
    
    # Step 10: Lift back to safe height
    error = move_arm(pub_cmd, loop_rate, target_above_angles, vel, accel)
    if error != 0:
        return error
    
    # Step 11: Return to home position
    error = move_arm(pub_cmd, loop_rate, go_away, vel, accel)
    if error != 0:
        return error

    # ========================= Student's code ends here ===========================
    
    return error
