# Define HSV ranges for EACH color
    color_ranges = {
        "green": ((40, 50, 50), (90, 255, 255)),
        "yellow": ((20, 60, 60), (35, 255, 255)),  # This is what you had as "blue"
    }
    
    # Get the appropriate color range based on the input parameter
    if color in color_ranges:
        lower, upper = color_ranges[color]
    else:
        print(f"Unknown color: {color}")
        return []

    # Create mask for the SPECIFIED color only
    mask = cv2.inRange(hsv_image, lower, upper)
    
    # Apply morphological operations to clean up the mask
    kernel = np.ones((7, 7), np.uint8)
    mask = cv2.morphologyEx(mask, cv2.MORPH_OPEN, kernel)
    mask = cv2.morphologyEx(mask, cv2.MORPH_CLOSE, kernel)
    
    # Detect keypoints for this specific color
    keypoints = detector.detect(mask)
    
    # Convert to world coordinates
    xw_yw = []
    for kp in keypoints:
        x_w, y_w = IMG2W(kp.pt[0], kp.pt[1])
        xw_yw.append((x_w, y_w))
    
    # Draw keypoints on image
    im_with_keypoints = cv2.drawKeypoints(image_raw, keypoints, np.array([]), (0, 0, 255), cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS)
